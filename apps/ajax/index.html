<!DOCTYPE HTML>
<html lang="en-US">
	<head>
		<meta charset="UTF-8">
		<title>AJAX - PHPfox Docs</title>
		
		<meta name="viewport" content="width=device-width,initial-scale=1">

		<link rel="stylesheet" href="//cdn.jsdelivr.net/bootstrap/3.3.4/css/bootstrap.min.css">
		<link rel="stylesheet" href="//cdn.jsdelivr.net/jquery.magnific-popup/1.0.0/magnific-popup.css">
		<link rel="stylesheet" href="//cdn.jsdelivr.net/fontawesome/4.3.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/8.6/styles/default.min.css">

		<link rel="stylesheet" href="/assets/css/bootstrap.min.css">
		<link rel="stylesheet" href="/assets/css/main.css?v=4">

		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
		<link rel="icon" href="/favicon.ico" type="image/x-icon">
	</head>
	<body>
		<div id="header">
			<div class="container">
				<h1><a href="http://www.phpfox.com/">PHP<span>fox</span></a></h1>
				<h2><a href="/">Support</a></h2>
			</div>
		</div>

		
		<div id="panel">
			<form method="get" class="search">
				<input type="text" name="q" placeholder="Search..." autocomplete="off">
			</form>
			<div id="results"></div>

			<nav>
			
				<div>
					<a href="#">Getting Started</a>
					<div>
					
						
						<a href="/getting-started/requirements/">Requirements</a>
					
						
						<a href="/getting-started/installing-phpfox/">Installing PHPfox</a>
					
						
						<a href="/getting-started/installing-phpfox-with-git/">Installing PHPfox with Git</a>
					
					</div>
				</div>
			
				<div>
					<a href="#">Upgrading PHPfox</a>
					<div>
					
						
						<a href="/upgrading-phpfox/manually-upload-files/">Manually Upload Files</a>
					
					</div>
				</div>
			
				<div>
					<a href="#">Apps</a>
					<div>
					
						
						<a href="/apps/getting-started/">Getting Started</a>
					
						
						<a href="/apps/file-structure/">File Structure</a>
					
						
						<a href="/apps/configuration/">Configuration</a>
					
						
						<a href="/apps/routing/">Page Routing</a>
					
						
						<a href="/apps/route-grouping/">Route Grouping</a>
					
						
						<a href="/apps/models-and-database/">Models, Database & Autoloading</a>
					
						
						<a href="/apps/forms-and-validation/">Forms & Form Validation</a>
					
						
						<a href="/apps/api/">API Access</a>
					
						
						<a href="/apps/phrases/">Phrases</a>
					
						
						<a href="/apps/ajax/">AJAX</a>
					
						
						<a href="/apps/install-uninstall-upgrades/">Install, Un-install & Upgrades</a>
					
						
						<a href="/apps/examples-and-resources/">Examples & Resources</a>
					
						
						<a href="/apps/blocks/">Blocks</a>
					
						
						<a href="/apps/global-and-user-group-settings/">Global & User Group Settings</a>
					
					</div>
				</div>
			
				<div>
					<a href="#">API Reference</a>
					<div>
					
						
						<a href="/api/feed/">Activity Feed</a>
					
						
						<a href="/api/user/">User</a>
					
						
						<a href="/api/like/">Like</a>
					
						
						<a href="/api/comment/">Comment</a>
					
						
						<a href="/api/message/">Message</a>
					
					</div>
				</div>
			
				<div>
					<a href="#">Themes</a>
					<div>
					
						
						<a href="/themes/getting-started/">Getting Started</a>
					
						
						<a href="/themes/managing-themes/">Managing Themes</a>
					
						
						<a href="/themes/html/">Editing HTML</a>
					
						
						<a href="/themes/css/">Editing CSS</a>
					
						
						<a href="/themes/javascript/">Editing JavaScript</a>
					
					</div>
				</div>
			
				<div>
					<a href="#">Admin Tips</a>
					<div>
					
						
						<a href="/admin-tips/changing-your-sites-favicon/">Changing your Sites Favicon</a>
					
						
						<a href="/admin-tips/installing-v3-modular-apps/">Installing v3 Modular Apps</a>
					
						
						<a href="/admin-tips/setting-up-ads/">Setting up Ads</a>
					
					</div>
				</div>
			
				<div>
					<a href="#">License Holder Tips</a>
					<div>
					
						
						<a href="/license-holder-tips/finding-license-id-and-key/">Finding your License ID &amp; Key</a>
					
					</div>
				</div>
			
			</nav>
		</div>
		<div id="content" class="container-fluid article">
			<h1 id="working-with-ajax">Working with AJAX</h1>

<p>You can create your own AJAX calls using built-in features that jQuery provides and simply send them to your routes.</p>

<p>Place all your JavaScript in the <strong>autoload.js</strong> file, which should be placed in your <strong>/assets/</strong> folder.</p>

<p>An example of how an <strong>autoload.js</strong> file could look</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$Ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">$</span><span class="p">(</span><span class="s1">'.my-ajax-link'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

		<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
			<span class="na">url</span><span class="p">:</span> <span class="nx">t</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">'url'</span><span class="p">),</span>
			<span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">$</span><span class="p">(</span><span class="s1">'#ajax-response-custom'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">});</span>

		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
	<span class="p">});</span>
<span class="p">});</span></code></pre></figure>

<p>Your HTML view could then be</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">data-url=</span><span class="s">"{{ url('/ajax-custom') }}"</span> <span class="na">class=</span><span class="s">"my-ajax-link"</span><span class="nt">&gt;</span>Click Me<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"ajax-response-custom"</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></figure>

<p>Your PHP route, which for this example we are placing in our <strong>start.php</strong> file</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">new Core\Route('/ajax-custom', function(Core\Controller $controller) {
	echo '<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"message"</span><span class="nt">&gt;</span>Howdy! I am an AJAX response.<span class="nt">&lt;/div&gt;</span>';
});</code></pre></figure>

<p>Once you click the link the AJAX response should output in the HTML div <strong>#ajax-response-custom</strong>, which in this case should be</p>

<blockquote>
  <p>Howdy! I am an AJAX response.</p>
</blockquote>

<h2 id="using-the-internal-ajax-method">Using the internal AJAX method</h2>

<p>You can also use our own internal AJAX method.</p>

<p>In a new example, your link could then be</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ url('/ajax-get') }}"</span> <span class="na">class=</span><span class="s">"ajax"</span><span class="nt">&gt;</span>Click Me<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"ajax-response"</span><span class="nt">&gt;&lt;/div&gt;</span></code></pre></figure>

<p>We pick up on the <strong>.ajax</strong> selector and to catch this request we have the following PHP route.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">new Core\Route('/ajax-get', function(Core\Controller $controller) {

	return [
		'run' =&gt; "$('#ajax-response').html('<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">\"message\"</span><span class="nt">&gt;</span>Hello World! Me is AJAX response.<span class="nt">&lt;/div&gt;</span>');"
	];
});</code></pre></figure>

<p>Unlike our first example, we return the output as an ARRAY. Any response that is an ARRAY we output as JSON. Our AJAX
function has several built-in options and if you simply wish to run your code, add it in the <strong>run</strong> key.</p>


		</div>
		

		
			<div class="links">
				<a href="https://github.com/moxi9/support.phpfox.com/blob/master/apps/ajax/" target="_blank">
					<i class="fa fa-github"></i> Edit on Github
				</a>
			</div>
		

		<script src="//cdn.jsdelivr.net/jquery/1.11.3/jquery.min.js"></script>
		<script src="//cdn.jsdelivr.net/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script src="//cdn.jsdelivr.net/jquery.magnific-popup/1.0.0/jquery.magnific-popup.min.js"></script>
		<script src="//cdn.jsdelivr.net/highlight.js/8.6/highlight.min.js"></script>

		<script src="/assets/js/main.js?v=4"></script>
		<script src="/assets/js/search.js?v=4"></script>
	</body>
</html>